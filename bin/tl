#!/usr/bin/env ruby

require "optparse"
require_relative "../lib/task-list"

optparse = OptionParser.new do |opts|
  opts.banner = "Usage: tl directory"
  opts.separator ""

  opts.on("-v", "--version", "Shows the version of the Number Converter.") do
    puts TaskList::VERSION
    exit
  end

  opts.on("-h", "--help", "Show some usage help.") do
    puts opts
    exit
  end
end

optparse.parse!

args = []
if ARGV.empty?
  puts "Do you want to list the tasks that are under the current directory?"
  print "[Yes|No] "
  answer = $stdin.gets.chomp

  answer = answer.split(//)
  answer = answer.empty? ? [""] : [answer.fetch(0).downcase]
  if answer.fetch(0) == "y"
    args = ["."]
  else
    $stdout.puts "\n"
    $stdout.puts optparse
    exit
  end
else
  args = ARGV
end

parser = TaskList::Parser.new(*args)
parser.parse
parser.print
